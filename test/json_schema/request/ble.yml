## YAML Template.
##---
$schema: http://json-schema.org/draft-04/schema#
id: "/request/ble"

type: object
definitions : 
    uuid :
        id : "uuid"
        type : string
        pattern: "^([-0-9a-fA-F]+)$"   ## "-"は許容
        minLength: 4
        maxLength: 36
    deviceAddress :
        id : "deviceAddress"
        type : string
        pattern: "^([0-9a-fA-F]+)$"
        minLength: 12
        maxLength: 12
        
additionalProperties: false
  
properties:
    advertisement : 
        anyOf :
            - 
                type : "null"
            -
                type : object
                required : [adv_data]
                additionalProperties: false
                properties:
                    adv_data : {$ref :#dataArray}
                    scan_resp : {$ref :#dataArray}
                
    scan :
        anyOf :
            - 
                type : "null"
            -
                type : object
                additionalProperties: false
                properties:
                    duration : 
                        type : integer
                
    
    connect :
        type : object 
        required: [address]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
            
    disconnect :
        type : object 
        required: [address]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
                
            
    get_services :
        type : object 
        required: [address]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
                
                
    get_characteristics :
        type : object 
        required: [address,service_uuid]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
            service_uuid : {$ref :uuid}
                

    read_characteristic :
        type : object 
        required: [address,service_uuid,characteristic_uuid]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
            service_uuid : {$ref :uuid}
            characteristic_uuid : {$ref :uuid}
            
    write_characteristic :
        type : object 
        required: [address,service_uuid,characteristic_uuid]
        additionalProperties: false
        properties:
            address : {$ref :deviceAddress}
            service_uuid : {$ref :uuid}
            characteristic_uuid : {$ref :uuid}
            data : {$ref :#dataArray}
                

    stream : 
        type : boolean
        default : false
        
        