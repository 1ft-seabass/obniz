<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>console.logをつかってみよう</title>
    <script src="obniz.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="obniz-debug"></div>
<h2>console.logの使い方</h2>
<script>
    var obniz = new Obniz("72618310");
    //var obniz = new Obniz("88801217");
    //var obniz = new Obniz("OBNIZ_ID_HERE");
    obniz.onconnect = async () => {
        // let button = obniz.wired("Button", {signal: 3});
        // button.onchange = function (pressed) {
        //     console.log("pressed:" + pressed); // 文字列としてつなげてみる
        //     console.log(`pressed:${pressed}`); // テンプレートリテラルという記法で表示
        // };
        // let sensor = obniz.wired("SHT31", {scl: 0, sda: 1});
        // let data = await sensor.getAllWait();
        // console.log("Sensor" + data); // NG [object Object]と出てしまう
        // console.log("Sensor", data); // OK センサーのデータを確認できる
        // console.table(data); // Dataをテーブル形式で表示
        // let button = obniz.wired("M5StickC_ToF", {sda: 4,scl:2,vcc:6,gnd:0});
        // while (true) {
        //     console.log(await button.getWait())
        // }
        let yun = obniz.wired("MatrixLED_HT16K33", {vcc:0, gnd:1, sda:2, scl:3});
        yun.init(8);
        // yun.writeVram();
        // await obniz.wait(1000);
        // yun.blinkRate(1)
        // yun.writeVram();
        // await obniz.wait(1000);
        // yun.blinkRate(2)
        // yun.writeVram();
        // await obniz.wait(1000);
        // yun.blinkRate(3)
        // yun.writeVram();
        // await obniz.wait(1000);
        // yun.blinkRate(0)
 //       yun.writeVram();
        // for(let i=0;i<16;i++) {
        //     await obniz.wait(200);
        //     yun.brightness(i)
        //     console.log(i);
        // }
        // for(let i=0;i<16;i++) {
        //     await obniz.wait(200);
        //     yun.brightness(15-i)
        //     console.log(15-i);
        // }

        const ctx = obniz.util.createCanvasContext(yun.width, yun.height);
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, yun.width, yun.height);
        ctx.fillStyle = "white";
        ctx.font = "9px sans-serif";
        ctx.fillText('H', 2, 7);

        yun.draw(ctx);
        // yun.clear();
        // yun.writeVram();
    }
</script>
</body>
</html>
