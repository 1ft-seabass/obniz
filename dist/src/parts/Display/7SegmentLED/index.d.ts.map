{"version":3,"sources":["../src/parts/Display/7SegmentLED/index.ts"],"names":[],"mappings":"AAAA,cAAM,YAAY;WAEF,IAAI;;;IAMX,IAAI,EAAE,GAAG,CAAC;IACV,YAAY,EAAE,GAAG,CAAC;IAClB,MAAM,EAAE,GAAG,CAAC;IACZ,cAAc,EAAE,GAAG,CAAC;IACpB,KAAK,EAAE,GAAG,CAAC;IACX,GAAG,EAAE,GAAG,CAAC;IACT,MAAM,EAAE,GAAG,CAAC;IACZ,eAAe,EAAE,GAAG,CAAC;IACrB,EAAE,EAAE,GAAG,CAAC;IACR,MAAM,EAAE,GAAG,CAAC;;IA4CZ,KAAK,CAAC,KAAK,EAAE,GAAG;IA6ChB,KAAK,CAAC,IAAI,EAAE,GAAG;IAkBf,QAAQ,CAAC,IAAI,EAAE,GAAG;IAelB,OAAO,CAAC,IAAI,EAAE,GAAG;IAMjB,EAAE;IAIF,GAAG;CAGX;AAED,eAAe,YAAY,CAAC","file":"index.d.ts","sourcesContent":["class _7SegmentLED {\n\n  public static info() {\n    return {\n      name: \"7SegmentLED\",\n    };\n  }\n\n  public keys: any;\n  public requiredKeys: any;\n  public digits: any;\n  public displayIoNames: any;\n  public obniz: any;\n  public ios: any;\n  public params: any;\n  public isCathodeCommon: any;\n  public dp: any;\n  public common: any;\n\n  constructor() {\n    this.keys = [\n      \"a\",\n      \"b\",\n      \"c\",\n      \"d\",\n      \"e\",\n      \"f\",\n      \"g\",\n      \"dp\",\n      \"common\",\n      \"commonType\",\n    ];\n    this.requiredKeys = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"];\n\n    this.digits = [\n      0x3f,\n      0x06,\n      0x5b,\n      0x4f,\n      0x66,\n      0x6d,\n      0x7d,\n      0x07,\n      0x7f,\n      0x6f,\n      0x6f,\n    ];\n\n    this.displayIoNames = {\n      a: \"a\",\n      b: \"b\",\n      c: \"c\",\n      d: \"d\",\n      e: \"e\",\n      f: \"f\",\n      g: \"g\",\n      dp: \"dp\",\n      common: \"com\",\n    };\n  }\n\n  public wired(obniz: any) {\n    function getIO(io: any) {\n      if (io && typeof io === \"object\") {\n        if (typeof io.output === \"function\") {\n          return io;\n        }\n      }\n      return obniz.getIO(io);\n    }\n\n    function isValidIO(io: any) {\n      if (io && typeof io === \"object\") {\n        if (typeof io.output === \"function\") {\n          return true;\n        }\n      }\n      return obniz.isValidIO(io);\n    }\n\n    this.obniz = obniz;\n    this.ios = [];\n    this.ios.push(getIO(this.params.a));\n    this.ios.push(getIO(this.params.b));\n    this.ios.push(getIO(this.params.c));\n    this.ios.push(getIO(this.params.d));\n    this.ios.push(getIO(this.params.e));\n    this.ios.push(getIO(this.params.f));\n    this.ios.push(getIO(this.params.g));\n\n    this.isCathodeCommon = this.params.commonType === \"anode\" ? false : true;\n\n    for (let i = 0; i < this.ios.length; i++) {\n      this.ios[i].output(this.isCathodeCommon ? false : true);\n    }\n\n    if (isValidIO(this.params.dp)) {\n      this.dp = getIO(this.params.dp);\n      this.dp.output(false);\n    }\n    if (isValidIO(this.params.common)) {\n      this.common = getIO(this.params.common);\n      this.on();\n    }\n  }\n\n  public print(data: any) {\n    if (typeof data === \"number\") {\n      data = Math.floor(data);\n      data = data % 10;\n\n      for (let i = 0; i < 7; i++) {\n        if (this.ios[i]) {\n          let val: any = this.digits[data] & (1 << i) ? true : false;\n          if (!this.isCathodeCommon) {\n            val = !val;\n          }\n          this.ios[i].output(val);\n        }\n      }\n      this.on();\n    }\n  }\n\n  public printRaw(data: any) {\n    if (typeof data === \"number\") {\n      for (let i = 0; i < 7; i++) {\n        if (this.ios[i]) {\n          let val: any = data & (1 << i) ? true : false;\n          if (!this.isCathodeCommon) {\n            val = !val;\n          }\n          this.ios[i].output(val);\n        }\n      }\n      this.on();\n    }\n  }\n\n  public dpState(show: any) {\n    if (this.dp) {\n      this.dp.output(this.isCathodeCommon ? show : !show);\n    }\n  }\n\n  public on() {\n    this.common.output(this.isCathodeCommon ? false : true);\n  }\n\n  public off() {\n    this.common.output(this.isCathodeCommon ? true : false);\n  }\n}\n\nexport default _7SegmentLED;\n"]}