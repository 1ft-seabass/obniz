"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
class KXR94_2050 {
    constructor() {
        this.keys = ["x", "y", "z", "vcc", "gnd", "enable", "self_test"];
        this.requiredKeys = ["x", "y", "z"];
    }
    static info() {
        return {
            name: "KXR94-2050",
        };
    }
    wired(obniz) {
        this.obniz = obniz;
        obniz.setVccGnd(this.params.vcc, this.params.gnd, "5v");
        this.ad_x = obniz.getAD(this.params.x);
        this.ad_y = obniz.getAD(this.params.y);
        this.ad_z = obniz.getAD(this.params.z);
        if (obniz.isValidIO(this.params.enable)) {
            obniz.getIO(this.params.enable).drive("5v");
            obniz.getIO(this.params.enable).output(true);
            obniz.display.setPinName(this.params.enable, "KXR94_2050", "E");
        }
        if (obniz.isValidIO(this.params.self_test)) {
            obniz.getIO(this.params.self_test).drive("5v");
            obniz.getIO(this.params.self_test).output(false);
            obniz.display.setPinName(this.params.self_test, "KXR94_2050", "T");
        }
        this.changeVccVoltage(5);
        this.ad_x.start((value) => {
            this._x_val = value;
            if (this.onChangeX) {
                this.onChangeX(this.voltage2gravity(value));
            }
            if (this.onChange) {
                this.onChange(this._get());
            }
        });
        this.ad_y.start((value) => {
            this._y_val = value;
            if (this.onChangeY) {
                this.onChangeY(this.voltage2gravity(value));
            }
            if (this.onChange) {
                this.onChange(this._get());
            }
        });
        this.ad_z.start((value) => {
            this._z_val = value;
            if (this.onChangeZ) {
                this.onChangeZ(this.voltage2gravity(value));
            }
            if (this.onChange) {
                this.onChange(this._get());
            }
        });
        if (this.obniz.isValidIO(this.params.vcc)) {
            this.obniz.getAD(this.params.vcc).start((value) => {
                this.changeVccVoltage(value);
            });
        }
        obniz.display.setPinName(this.params.x, "KXR94_2050", "x");
        obniz.display.setPinName(this.params.y, "KXR94_2050", "y");
        obniz.display.setPinName(this.params.z, "KXR94_2050", "z");
        if (this.obniz.isValidIO(this.params.vcc)) {
            obniz.display.setPinName(this.params.vcc, "KXR94_2050", "vcc");
        }
    }
    changeVccVoltage(pwrVoltage) {
        this.sensitivity = pwrVoltage / 5; // Set sensitivity (unit:V)
        this.offsetVoltage = pwrVoltage / 2; // Set offset voltage (Output voltage at 0g, unit:V)
    }
    voltage2gravity(volt) {
        return (volt - this.offsetVoltage) / this.sensitivity;
    }
    get() {
        return this._get();
    }
    _get() {
        return {
            x: this.voltage2gravity(this._x_val),
            y: this.voltage2gravity(this._y_val),
            z: this.voltage2gravity(this._z_val),
        };
    }
    getWait() {
        return __awaiter(this, void 0, void 0, function* () {
            this._x_val = yield this.ad_x.getWait();
            this._y_val = yield this.ad_y.getWait();
            this._z_val = yield this.ad_z.getWait();
            return this._get();
        });
    }
}
exports.default = KXR94_2050;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9LWFI5NC0yMDUwL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsTUFBTSxVQUFVO0lBeUJkO1FBQ0UsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUExQk0sTUFBTSxDQUFDLElBQUk7UUFDaEIsT0FBTztZQUNMLElBQUksRUFBRSxZQUFZO1NBQ25CLENBQUM7SUFDSixDQUFDO0lBd0JNLEtBQUssQ0FBQyxLQUFVO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBRW5CLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFeEQsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkMsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDdkMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1B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SSxDQUFDLE1BQU0sQ0FBQztTQUNyQyxDQUFDO0lBQ0osQ0FBQztJQUVZLE9BQU87O1lBQ2xCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBRXhDLE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JCLENBQUM7S0FBQTtDQUNGO0FBRUQsa0JBQWUsVUFBVSxDQUFDIiwiZmlsZSI6InNyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9LWFI5NC0yMDUwL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgS1hSOTRfMjA1MCB7XG5cbiAgcHVibGljIHN0YXRpYyBpbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBcIktYUjk0LTIwNTBcIixcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGtleXM6IGFueTtcbiAgcHVibGljIHJlcXVpcmVkS2V5czogYW55O1xuICBwdWJsaWMgb2JuaXo6IGFueTtcbiAgcHVibGljIHBhcmFtczogYW55O1xuICBwdWJsaWMgYWRfeDogYW55O1xuICBwdWJsaWMgYWRfeTogYW55O1xuICBwdWJsaWMgYWRfejogYW55O1xuICBwdWJsaWMgX3hfdmFsOiBhbnk7XG4gIHB1YmxpYyBvbkNoYW5nZVg6IGFueTtcbiAgcHVibGljIG9uQ2hhbmdlOiBhbnk7XG4gIHB1YmxpYyBfeV92YWw6IGFueTtcbiAgcHVibGljIG9uQ2hhbmdlWTogYW55O1xuICBwdWJsaWMgX3pfdmFsOiBhbnk7XG4gIHB1YmxpYyBvbkNoYW5nZVo6IGFueTtcbiAgcHVibGljIHNlbnNpdGl2aXR5OiBhbnk7XG4gIHB1YmxpYyBvZmZzZXRWb2x0YWdlOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5rZXlzID0gW1wieFwiLCBcInlcIiwgXCJ6XCIsIFwidmNjXCIsIFwiZ25kXCIsIFwiZW5hYmxlXCIsIFwic2VsZl90ZXN0XCJdO1xuICAgIHRoaXMucmVxdWlyZWRLZXlzID0gW1wieFwiLCBcInlcIiwgXCJ6XCJdO1xuICB9XG5cbiAgcHVibGljIHdpcmVkKG9ibml6OiBhbnkpIHtcbiAgICB0aGlzLm9ibml6ID0gb2JuaXo7XG5cbiAgICBvYm5pei5zZXRWY2NHbmQodGhpcy5wYXJhbXMudmNjLCB0aGlzLnBhcmFtcy5nbmQsIFwiNXZcIik7XG5cbiAgICB0aGlzLmFkX3ggPSBvYm5pei5nZXRBRCh0aGlzLnBhcmFtcy54KTtcbiAgICB0aGlzLmFkX3kgPSBvYm5pei5nZXRBRCh0aGlzLnBhcmFtcy55KTtcbiAgICB0aGlzLmFkX3ogPSBvYm5pei5nZXRBRCh0aGlzLnBhcmFtcy56KTtcblxuICAgIGlmIChvYm5pei5pc1ZhbGlkSU8odGhpcy5wYXJhbXMuZW5hYmxlKSkge1xuICAgICAgb2JuaXouZ2V0SU8odGhpcy5wYXJhbXMuZW5hYmxlKS5kcml2ZShcIjV2XCIpO1xuICAgICAgb2JuaXouZ2V0SU8odGhpcy5wYXJhbXMuZW5hYmxlKS5vdXRwdXQodHJ1ZSk7XG4gICAgICBvYm5pei5kaXNwbGF5LnNldFBpbk5hbWUodGhpcy5wYXJhbXMuZW5hYmxlLCBcIktYUjk0XzIwNTBcIiwgXCJFXCIpO1xuICAgIH1cbiAgICBpZiAob2JuaXouaXNWYWxpZElPKHRoaXMucGFyYW1zLnNlbGZfdGVzdCkpIHtcbiAgICAgIG9ibml6LmdldElPKHRoaXMucGFyYW1zLnNlbGZfdGVzdCkuZHJpdmUoXCI1dlwiKTtcbiAgICAgIG9ibml6LmdldElPKHRoaXMucGFyYW1zLnNlbGZfdGVzdCkub3V0cHV0KGZhbHNlKTtcbiAgICAgIG9ibml6LmRpc3BsYXkuc2V0UGluTmFtZSh0aGlzLnBhcmFtcy5zZWxmX3Rlc3QsIFwiS1hSOTRfMjA1MFwiLCBcIlRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFuZ2VWY2NWb2x0YWdlKDUpO1xuXG4gICAgdGhpcy5hZF94LnN0YXJ0KCh2YWx1ZTogYW55KSA9PiB7XG4gICAgICB0aGlzLl94X3ZhbCA9IHZhbHVlO1xuICAgICAgaWYgKHRoaXMub25DaGFuZ2VYKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VYKHRoaXMudm9sdGFnZTJncmF2aXR5KHZhbHVlKSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuX2dldCgpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRfeS5zdGFydCgodmFsdWU6IGFueSkgPT4ge1xuICAgICAgdGhpcy5feV92YWwgPSB2YWx1ZTtcbiAgICAgIGlmICh0aGlzLm9uQ2hhbmdlWSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlWSh0aGlzLnZvbHRhZ2UyZ3Jhdml0eSh2YWx1ZSkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLl9nZXQoKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkX3ouc3RhcnQoKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIHRoaXMuX3pfdmFsID0gdmFsdWU7XG4gICAgICBpZiAodGhpcy5vbkNoYW5nZVopIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZVoodGhpcy52b2x0YWdlMmdyYXZpdHkodmFsdWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2UodGhpcy5fZ2V0KCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMub2JuaXouaXNWYWxpZElPKHRoaXMucGFyYW1zLnZjYykpIHtcbiAgICAgIHRoaXMub2JuaXouZ2V0QUQodGhpcy5wYXJhbXMudmNjKS5zdGFydCgodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLmNoYW5nZVZjY1ZvbHRhZ2UodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb2JuaXouZGlzcGxheS5zZXRQaW5OYW1lKHRoaXMucGFyYW1zLngsIFwiS1hSOTRfMjA1MFwiLCBcInhcIik7XG4gICAgb2JuaXouZGlzcGxheS5zZXRQaW5OYW1lKHRoaXMucGFyYW1zLnksIFwiS1hSOTRfMjA1MFwiLCBcInlcIik7XG4gICAgb2JuaXouZGlzcGxheS5zZXRQaW5OYW1lKHRoaXMucGFyYW1zLnosIFwiS1hSOTRfMjA1MFwiLCBcInpcIik7XG5cbiAgICBpZiAodGhpcy5vYm5pei5pc1ZhbGlkSU8odGhpcy5wYXJhbXMudmNjKSkge1xuICAgICAgb2JuaXouZGlzcGxheS5zZXRQaW5OYW1lKHRoaXMucGFyYW1zLnZjYywgXCJLWFI5NF8yMDUwXCIsIFwidmNjXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjaGFuZ2VWY2NWb2x0YWdlKHB3clZvbHRhZ2U6IGFueSkge1xuICAgIHRoaXMuc2Vuc2l0aXZpdHkgPSBwd3JWb2x0YWdlIC8gNTsgLy8gU2V0IHNlbnNpdGl2aXR5ICh1bml0OlYpXG4gICAgdGhpcy5vZmZzZXRWb2x0YWdlID0gcHdyVm9sdGFnZSAvIDI7IC8vIFNldCBvZmZzZXQgdm9sdGFnZSAoT3V0cHV0IHZvbHRhZ2UgYXQgMGcsIHVuaXQ6VilcbiAgfVxuXG4gIHB1YmxpYyB2b2x0YWdlMmdyYXZpdHkodm9sdDogYW55KSB7XG4gICAgcmV0dXJuICh2b2x0IC0gdGhpcy5vZmZzZXRWb2x0YWdlKSAvIHRoaXMuc2Vuc2l0aXZpdHk7XG4gIH1cblxuICBwdWJsaWMgZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9nZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBfZ2V0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB4OiB0aGlzLnZvbHRhZ2UyZ3Jhdml0eSh0aGlzLl94X3ZhbCksXG4gICAgICB5OiB0aGlzLnZvbHRhZ2UyZ3Jhdml0eSh0aGlzLl95X3ZhbCksXG4gICAgICB6OiB0aGlzLnZvbHRhZ2UyZ3Jhdml0eSh0aGlzLl96X3ZhbCksXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRXYWl0KCkge1xuICAgIHRoaXMuX3hfdmFsID0gYXdhaXQgdGhpcy5hZF94LmdldFdhaXQoKTtcbiAgICB0aGlzLl95X3ZhbCA9IGF3YWl0IHRoaXMuYWRfeS5nZXRXYWl0KCk7XG4gICAgdGhpcy5fel92YWwgPSBhd2FpdCB0aGlzLmFkX3ouZ2V0V2FpdCgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2dldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtYUjk0XzIwNTA7XG4iXX0=
