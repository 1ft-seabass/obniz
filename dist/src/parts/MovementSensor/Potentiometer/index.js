"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Potentiometer {
    constructor() {
        this.keys = ["pin0", "pin1", "pin2"];
        this.requiredKeys = ["pin0", "pin1", "pin2"];
        this.vcc_voltage = 5.0;
    }
    static info() {
        return {
            name: "Potentiometer",
        };
    }
    wired(obniz) {
        this.obniz.setVccGnd(this.params.pin0, this.params.pin2, "5v");
        this.ad = obniz.getAD(this.params.pin1);
        const self = this;
        obniz.getAD(this.params.pin0).start((value) => {
            self.vcc_voltage = value;
        });
        this.ad.start((value) => {
            self.position = value / self.vcc_voltage;
            if (self.onchange) {
                self.onchange(self.position);
            }
        });
    }
}
exports.default = Potentiometer;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9Qb3RlbnRpb21ldGVyL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxhQUFhO0lBaUJqQjtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRTdDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO0lBQ3pCLENBQUM7SUFwQk0sTUFBTSxDQUFDLElBQUk7UUFDaEIsT0FBTztZQUNMLElBQUksRUFBRSxlQUFlO1NBQ3RCLENBQUM7SUFDSixDQUFDO0lBa0JNLEtBQUssQ0FBQyxLQUFVO1FBQ3JCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXhDLE1BQU0sSUFBSSxHQUFRLElBQUksQ0FBQztRQUV2QixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBVSxFQUFFLEVBQUU7WUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQVUsRUFBRSxFQUFFO1lBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBRUQsa0JBQWUsYUFBYSxDQUFDIiwiZmlsZSI6InNyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9Qb3RlbnRpb21ldGVyL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUG90ZW50aW9tZXRlciB7XG5cbiAgcHVibGljIHN0YXRpYyBpbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBcIlBvdGVudGlvbWV0ZXJcIixcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGtleXM6IGFueTtcbiAgcHVibGljIHJlcXVpcmVkS2V5czogYW55O1xuICBwdWJsaWMgdmNjX3ZvbHRhZ2U6IGFueTtcbiAgcHVibGljIG9ibml6OiBhbnk7XG4gIHB1YmxpYyBwYXJhbXM6IGFueTtcbiAgcHVibGljIGFkOiBhbnk7XG4gIHB1YmxpYyBwb3NpdGlvbjogYW55O1xuICBwdWJsaWMgb25jaGFuZ2U6IGFueTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmtleXMgPSBbXCJwaW4wXCIsIFwicGluMVwiLCBcInBpbjJcIl07XG4gICAgdGhpcy5yZXF1aXJlZEtleXMgPSBbXCJwaW4wXCIsIFwicGluMVwiLCBcInBpbjJcIl07XG5cbiAgICB0aGlzLnZjY192b2x0YWdlID0gNS4wO1xuICB9XG5cbiAgcHVibGljIHdpcmVkKG9ibml6OiBhbnkpIHtcbiAgICB0aGlzLm9ibml6LnNldFZjY0duZCh0aGlzLnBhcmFtcy5waW4wLCB0aGlzLnBhcmFtcy5waW4yLCBcIjV2XCIpO1xuICAgIHRoaXMuYWQgPSBvYm5pei5nZXRBRCh0aGlzLnBhcmFtcy5waW4xKTtcblxuICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XG5cbiAgICBvYm5pei5nZXRBRCh0aGlzLnBhcmFtcy5waW4wKS5zdGFydCgodmFsdWU6IGFueSkgPT4ge1xuICAgICAgc2VsZi52Y2Nfdm9sdGFnZSA9IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZC5zdGFydCgodmFsdWU6IGFueSkgPT4ge1xuICAgICAgc2VsZi5wb3NpdGlvbiA9IHZhbHVlIC8gc2VsZi52Y2Nfdm9sdGFnZTtcbiAgICAgIGlmIChzZWxmLm9uY2hhbmdlKSB7XG4gICAgICAgIHNlbGYub25jaGFuZ2Uoc2VsZi5wb3NpdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG90ZW50aW9tZXRlcjtcbiJdfQ==
