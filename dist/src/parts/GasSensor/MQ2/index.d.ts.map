{"version":3,"sources":["../src/parts/GasSensor/MQ2/index.ts"],"names":[],"mappings":"AAAA,cAAM,GAAG;WAEO,IAAI;;;IAMX,IAAI,EAAE,GAAG,CAAC;IACV,YAAY,EAAE,GAAG,CAAC;IAClB,cAAc,EAAE,GAAG,CAAC;IACpB,eAAe,EAAE,GAAG,CAAC;IACrB,eAAe,EAAE,GAAG,CAAC;IACrB,YAAY,EAAE,GAAG,CAAC;IAClB,KAAK,EAAE,GAAG,CAAC;IACX,GAAG,EAAE,GAAG,CAAC;IACT,MAAM,EAAE,GAAG,CAAC;IACZ,GAAG,EAAE,GAAG,CAAC;IACT,EAAE,EAAE,GAAG,CAAC;IACR,EAAE,EAAE,GAAG,CAAC;;IAeR,KAAK,CAAC,KAAK,EAAE,GAAG;IAiChB,YAAY;IAIZ,QAAQ,CAAC,OAAO,EAAE,GAAG;CA0B7B;AAED,eAAe,GAAG,CAAC","file":"index.d.ts","sourcesContent":["class MQ2 {\n\n  public static info() {\n    return {\n      name: \"MQ2\",\n    };\n  }\n\n  public keys: any;\n  public requiredKeys: any;\n  public onchangeanalog: any;\n  public onchangedigital: any;\n  public onexceedvoltage: any;\n  public voltageLimit: any;\n  public obniz: any;\n  public vcc: any;\n  public params: any;\n  public gnd: any;\n  public ad: any;\n  public do: any;\n\n  constructor() {\n    this.keys = [\"gnd\", \"vcc\", \"do\", \"ao\"];\n    this.requiredKeys = [];\n\n    this.onchangeanalog = undefined;\n    this.onchangedigital = undefined;\n    this.onexceedvoltage = undefined;\n    this.voltageLimit = undefined;\n\n    // this.RL = 2 * 1000;\n    // this.RO = 20 * 1000;\n  }\n\n  public wired(obniz: any) {\n    this.obniz = obniz;\n\n    this.vcc = this.params.vcc;\n    this.gnd = this.params.gnd;\n\n    if (this.obniz.isValidIO(this.params.ao)) {\n      this.ad = obniz.getAD(this.params.ao);\n      this.ad.start((voltage: any) => {\n        // this.level = this.calc(voltage);\n        if (typeof this.onchangeanalog === \"function\") {\n          this.onchangeanalog(voltage);\n        }\n        if (\n          typeof this.voltageLimit === \"number\" &&\n          this.voltageLimit <= voltage &&\n          typeof this.onexceedvoltage === \"function\"\n        ) {\n          this.onexceedvoltage(voltage);\n        }\n      });\n    }\n\n    if (this.obniz.isValidIO(this.params.do)) {\n      this.do = obniz.getIO(this.params.do);\n      this.do.input((value: any) => {\n        if (typeof this.onchangedigital === \"function\") {\n          this.onchangedigital(value);\n        }\n      });\n    }\n  }\n\n  public startHeating() {\n    this.obniz.setVccGnd(this.vcc, this.gnd, \"5v\");\n  }\n\n  public heatWait(seconds: any) {\n    this.startHeating();\n    if (seconds > 0) {\n      seconds *= 1000;\n    } else {\n      seconds = 2 * 60 * 1000;\n    }\n    return new Promise((resolve: any) => {\n      setTimeout(resolve, seconds);\n    });\n  }\n\n  // Rs/Ro will descrease by insease of gas.\n  // Rs = resitance 20k-100k. Ro = resistance of 1000ppm LPG\n  // If RL =\n\n  // calc(voltage) {\n\n  //   if (voltage ===0) {\n  //     voltage = 0.000001\n  //   }\n  //   const RS = this.RL / voltage * 5.0\n  //   const ratio = RS / this.RO;\n\n  //   return voltage;\n  // }\n}\n\nexport default MQ2;\n"]}