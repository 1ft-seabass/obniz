"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const bleAdvertisementBuilder_1 = __importDefault(require("./bleAdvertisementBuilder"));
class BleAdvertisement {
    constructor(Obniz) {
        this.Obniz = Obniz;
        this.adv_data = [];
        this.scan_resp = [];
    }
    start() {
        const obj = {};
        obj.ble = {};
        obj.ble.advertisement = {
            adv_data: this.adv_data,
        };
        if (this.scan_resp.length > 0) {
            obj.ble.advertisement.scan_resp = this.scan_resp;
        }
        this.Obniz.send(obj);
    }
    end() {
        const obj = {};
        obj.ble = {};
        obj.ble.advertisement = null;
        this.Obniz.send(obj);
    }
    setAdvDataRaw(adv_data) {
        this.adv_data = adv_data;
    }
    setAdvData(json) {
        const builder = this.advDataBulider(json);
        this.setAdvDataRaw(builder.build());
    }
    advDataBulider(jsonVal) {
        return new bleAdvertisementBuilder_1.default(this.Obniz, jsonVal);
    }
    scanRespDataBuilder(json) {
        return new bleAdvertisementBuilder_1.default(this.Obniz, json);
    }
    setScanRespDataRaw(scan_resp) {
        this.scan_resp = scan_resp;
    }
    setScanRespData(json) {
        this.setScanRespDataRaw(this.scanRespDataBuilder(json).build());
    }
}
exports.default = BleAdvertisement;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYm5pei9saWJzL2VtYmVkcy9ibGUvYmxlQWR2ZXJ0aXNlbWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHdGQUFnRDtBQUVoRCxNQUFNLGdCQUFnQjtJQUtwQixZQUFZLEtBQVU7UUFDcEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVNLEtBQUs7UUFDVixNQUFNLEdBQUcsR0FBUSxFQUFFLENBQUM7UUFDcEIsR0FBRyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDYixHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRztZQUN0QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7U0FDeEIsQ0FBQztRQUVGLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzdCLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1NBQ2xEO1FBRUQsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVNLEdBQUc7UUFDUixNQUFNLEdBQUcsR0FBUSxFQUFFLENBQUM7UUFDcEIsR0FBRyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDYixHQUFHLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVNLGFBQWEsQ0FBQyxRQUFhO1FBQ2hDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzNCLENBQUM7SUFFTSxVQUFVLENBQUMsSUFBUztRQUN6QixNQUFNLE9BQU8sR0FBUSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLGNBQWMsQ0FBQyxPQUFZO1FBQ2hDLE9BQU8sSUFBSSxpQ0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLG1CQUFtQixDQUFDLElBQVM7UUFDbEMsT0FBTyxJQUFJLGlDQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRU0sa0JBQWtCLENBQUMsU0FBYztRQUN0QyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRU0sZUFBZSxDQUFDLElBQVM7UUFDOUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7Q0FDRjtBQUVELGtCQUFlLGdCQUFnQixDQUFDIiwiZmlsZSI6InNyYy9vYm5pei9saWJzL2VtYmVkcy9ibGUvYmxlQWR2ZXJ0aXNlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCdWlsZGVyIGZyb20gXCIuL2JsZUFkdmVydGlzZW1lbnRCdWlsZGVyXCI7XG5cbmNsYXNzIEJsZUFkdmVydGlzZW1lbnQge1xuICBwdWJsaWMgT2JuaXo6IGFueTtcbiAgcHVibGljIGFkdl9kYXRhOiBhbnk7XG4gIHB1YmxpYyBzY2FuX3Jlc3A6IGFueTtcblxuICBjb25zdHJ1Y3RvcihPYm5pejogYW55KSB7XG4gICAgdGhpcy5PYm5peiA9IE9ibml6O1xuICAgIHRoaXMuYWR2X2RhdGEgPSBbXTtcbiAgICB0aGlzLnNjYW5fcmVzcCA9IFtdO1xuICB9XG5cbiAgcHVibGljIHN0YXJ0KCkge1xuICAgIGNvbnN0IG9iajogYW55ID0ge307XG4gICAgb2JqLmJsZSA9IHt9O1xuICAgIG9iai5ibGUuYWR2ZXJ0aXNlbWVudCA9IHtcbiAgICAgIGFkdl9kYXRhOiB0aGlzLmFkdl9kYXRhLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5zY2FuX3Jlc3AubGVuZ3RoID4gMCkge1xuICAgICAgb2JqLmJsZS5hZHZlcnRpc2VtZW50LnNjYW5fcmVzcCA9IHRoaXMuc2Nhbl9yZXNwO1xuICAgIH1cblxuICAgIHRoaXMuT2JuaXouc2VuZChvYmopO1xuICB9XG5cbiAgcHVibGljIGVuZCgpIHtcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xuICAgIG9iai5ibGUgPSB7fTtcbiAgICBvYmouYmxlLmFkdmVydGlzZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuT2JuaXouc2VuZChvYmopO1xuICB9XG5cbiAgcHVibGljIHNldEFkdkRhdGFSYXcoYWR2X2RhdGE6IGFueSkge1xuICAgIHRoaXMuYWR2X2RhdGEgPSBhZHZfZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRBZHZEYXRhKGpzb246IGFueSkge1xuICAgIGNvbnN0IGJ1aWxkZXI6IGFueSA9IHRoaXMuYWR2RGF0YUJ1bGlkZXIoanNvbik7XG4gICAgdGhpcy5zZXRBZHZEYXRhUmF3KGJ1aWxkZXIuYnVpbGQoKSk7XG4gIH1cblxuICBwdWJsaWMgYWR2RGF0YUJ1bGlkZXIoanNvblZhbDogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBCdWlsZGVyKHRoaXMuT2JuaXosIGpzb25WYWwpO1xuICB9XG5cbiAgcHVibGljIHNjYW5SZXNwRGF0YUJ1aWxkZXIoanNvbjogYW55KSB7XG4gICAgcmV0dXJuIG5ldyBCdWlsZGVyKHRoaXMuT2JuaXosIGpzb24pO1xuICB9XG5cbiAgcHVibGljIHNldFNjYW5SZXNwRGF0YVJhdyhzY2FuX3Jlc3A6IGFueSkge1xuICAgIHRoaXMuc2Nhbl9yZXNwID0gc2Nhbl9yZXNwO1xuICB9XG5cbiAgcHVibGljIHNldFNjYW5SZXNwRGF0YShqc29uOiBhbnkpIHtcbiAgICB0aGlzLnNldFNjYW5SZXNwRGF0YVJhdyh0aGlzLnNjYW5SZXNwRGF0YUJ1aWxkZXIoanNvbikuYnVpbGQoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQmxlQWR2ZXJ0aXNlbWVudDtcbiJdfQ==
