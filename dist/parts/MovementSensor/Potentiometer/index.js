"use strict";
class Potentiometer {
    constructor() {
        this.keys = ['pin0', 'pin1', 'pin2'];
        this.requiredKeys = ['pin0', 'pin1', 'pin2'];
        this.vcc_voltage = 5.0;
    }
    static info() {
        return {
            name: 'Potentiometer',
        };
    }
    wired(obniz) {
        this.obniz.setVccGnd(this.params.pin0, this.params.pin2, '5v');
        this.ad = obniz.getAD(this.params.pin1);
        let self = this;
        obniz.getAD(this.params.pin0).start(function (value) {
            self.vcc_voltage = value;
        });
        this.ad.start(function (value) {
            self.position = value / self.vcc_voltage;
            if (self.onchange) {
                self.onchange(self.position);
            }
        });
    }
}
if (typeof module === 'object') {
    module.exports = Potentiometer;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9Qb3RlbnRpb21ldGVyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLGFBQWE7SUFDakI7UUFDRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUU3QyxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQztJQUN6QixDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUk7UUFDVCxPQUFPO1lBQ0wsSUFBSSxFQUFFLGVBQWU7U0FDdEIsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBSztRQUNULElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXhDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUVoQixLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVMsS0FBSztZQUNoRCxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUMzQixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVMsS0FBSztZQUMxQixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1lBQ3pDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDOUI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQUVELElBQUksT0FBTyxNQUFNLEtBQUssUUFBUSxFQUFFO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDO0NBQ2hDIiwiZmlsZSI6InBhcnRzL01vdmVtZW50U2Vuc29yL1BvdGVudGlvbWV0ZXIvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQb3RlbnRpb21ldGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5rZXlzID0gWydwaW4wJywgJ3BpbjEnLCAncGluMiddO1xuICAgIHRoaXMucmVxdWlyZWRLZXlzID0gWydwaW4wJywgJ3BpbjEnLCAncGluMiddO1xuXG4gICAgdGhpcy52Y2Nfdm9sdGFnZSA9IDUuMDtcbiAgfVxuXG4gIHN0YXRpYyBpbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnUG90ZW50aW9tZXRlcicsXG4gICAgfTtcbiAgfVxuXG4gIHdpcmVkKG9ibml6KSB7XG4gICAgdGhpcy5vYm5pei5zZXRWY2NHbmQodGhpcy5wYXJhbXMucGluMCwgdGhpcy5wYXJhbXMucGluMiwgJzV2Jyk7XG4gICAgdGhpcy5hZCA9IG9ibml6LmdldEFEKHRoaXMucGFyYW1zLnBpbjEpO1xuXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgb2JuaXouZ2V0QUQodGhpcy5wYXJhbXMucGluMCkuc3RhcnQoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHNlbGYudmNjX3ZvbHRhZ2UgPSB2YWx1ZTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWQuc3RhcnQoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHNlbGYucG9zaXRpb24gPSB2YWx1ZSAvIHNlbGYudmNjX3ZvbHRhZ2U7XG4gICAgICBpZiAoc2VsZi5vbmNoYW5nZSkge1xuICAgICAgICBzZWxmLm9uY2hhbmdlKHNlbGYucG9zaXRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFBvdGVudGlvbWV0ZXI7XG59XG4iXX0=
