"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
class MPU6050 {
    constructor() {
        this.keys = [
            'gnd',
            'vcc',
            'sda',
            'scl',
            'i2c',
            'address',
            'accelerometer_range',
            'gyroscope_range',
        ];
        this.required = [];
    }
    static info() {
        return {
            name: 'MPU6050',
        };
    }
    wired(obniz) {
        this.obniz = obniz;
        obniz.setVccGnd(this.params.vcc, this.params.gnd, '5v');
        this.params.clock = 100000;
        this.params.pull = '3v';
        this.params.mode = 'master';
        this._address = this.params.address || 0x68;
        this.i2c = obniz.getI2CWithConfig(this.params);
        this.setConfig(this.params.accelerometer_range || 2, this.params.gyroscope_range || 250);
    }
    setConfig(accelerometer_range, gyroscope_range) {
        //accel range set (0x00:2g, 0x08:4g, 0x10:8g, 0x18:16g)
        switch (accelerometer_range) {
            case 2:
                this.i2c.write(this._address, [0x1c, 0x00]);
                break;
            case 4:
                this.i2c.write(this._address, [0x1c, 0x08]);
                break;
            case 8:
                this.i2c.write(this._address, [0x1c, 0x10]);
                break;
            case 16:
                this.i2c.write(this._address, [0x1c, 0x18]);
                break;
            default:
                throw new Error('accel_range variable 2,4,8,16 setting');
        }
        //gyro range & LPF set (0x00:250, 0x08:500, 0x10:1000, 0x18:2000[deg/s])
        switch (gyroscope_range) {
            case 250:
                this.i2c.write(this._address, [0x1b, 0x00]);
                break;
            case 500:
                this.i2c.write(this._address, [0x1b, 0x08]);
                break;
            case 1000:
                this.i2c.write(this._address, [0x1b, 0x10]);
                break;
            case 2000:
                this.i2c.write(this._address, [0x1b, 0x18]);
                break;
            default:
                throw new Error('accel_range variable 250,500,1000,2000 setting');
        }
        this._accel_range = accelerometer_range;
        this._gyro_range = gyroscope_range;
    }
    getWait() {
        return __awaiter(this, void 0, void 0, function* () {
            this.i2c.write(this._address, [0x3b]); //request MPU6050 data
            let raw_data_MPU6050 = yield this.i2c.readWait(this._address, 14); //read 14byte
            let ac_scale = this._accel_range / 32768;
            let gy_scale = this._gyro_range / 32768;
            return {
                accelerometer: {
                    x: this.char2short(raw_data_MPU6050[0], raw_data_MPU6050[1]) * ac_scale,
                    y: this.char2short(raw_data_MPU6050[2], raw_data_MPU6050[3]) * ac_scale,
                    z: this.char2short(raw_data_MPU6050[4], raw_data_MPU6050[5]) * ac_scale,
                },
                temp: this.char2short(raw_data_MPU6050[6], raw_data_MPU6050[7]) / 333.87 + 21,
                gyroscope: {
                    x: this.char2short(raw_data_MPU6050[8], raw_data_MPU6050[9]) * gy_scale,
                    y: this.char2short(raw_data_MPU6050[10], raw_data_MPU6050[11]) *
                        gy_scale,
                    z: this.char2short(raw_data_MPU6050[12], raw_data_MPU6050[13]) *
                        gy_scale,
                },
            };
        });
    }
    char2short(valueH, valueL) {
        const buffer = new ArrayBuffer(2);
        const dv = new DataView(buffer);
        dv.setUint8(0, valueH);
        dv.setUint8(1, valueL);
        return dv.getInt16(0, false);
    }
}
if (typeof module === 'object') {
    module.exports = MPU6050;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJ0cy9Nb3ZlbWVudFNlbnNvci9NUFU2MDUwL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFNLE9BQU87SUFDWDtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUc7WUFDVixLQUFLO1lBQ0wsS0FBSztZQUNMLEtBQUs7WUFDTCxLQUFLO1lBQ0wsS0FBSztZQUNMLFNBQVM7WUFDVCxxQkFBcUI7WUFDckIsaUJBQWlCO1NBQ2xCLENBQUM7UUFDRixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUk7UUFDVCxPQUFPO1lBQ0wsSUFBSSxFQUFFLFNBQVM7U0FDaEIsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBSztRQUNULElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1FBQzNCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUM7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUM7UUFDNUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxTQUFTLENBQ1osSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLEVBQ3BDLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxJQUFJLEdBQUcs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QVEsRUFBRTtJQUM5QixNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztDQUMxQiIsImZpbGUiOiJwYXJ0cy9Nb3ZlbWVudFNlbnNvci9NUFU2MDUwL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTVBVNjA1MCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMua2V5cyA9IFtcbiAgICAgICdnbmQnLFxuICAgICAgJ3ZjYycsXG4gICAgICAnc2RhJyxcbiAgICAgICdzY2wnLFxuICAgICAgJ2kyYycsXG4gICAgICAnYWRkcmVzcycsXG4gICAgICAnYWNjZWxlcm9tZXRlcl9yYW5nZScsXG4gICAgICAnZ3lyb3Njb3BlX3JhbmdlJyxcbiAgICBdO1xuICAgIHRoaXMucmVxdWlyZWQgPSBbXTtcbiAgfVxuXG4gIHN0YXRpYyBpbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnTVBVNjA1MCcsXG4gICAgfTtcbiAgfVxuXG4gIHdpcmVkKG9ibml6KSB7XG4gICAgdGhpcy5vYm5peiA9IG9ibml6O1xuICAgIG9ibml6LnNldFZjY0duZCh0aGlzLnBhcmFtcy52Y2MsIHRoaXMucGFyYW1zLmduZCwgJzV2Jyk7XG4gICAgdGhpcy5wYXJhbXMuY2xvY2sgPSAxMDAwMDA7XG4gICAgdGhpcy5wYXJhbXMucHVsbCA9ICczdic7XG4gICAgdGhpcy5wYXJhbXMubW9kZSA9ICdtYXN0ZXInO1xuICAgIHRoaXMuX2FkZHJlc3MgPSB0aGlzLnBhcmFtcy5hZGRyZXNzIHx8IDB4Njg7XG4gICAgdGhpcy5pMmMgPSBvYm5pei5nZXRJMkNXaXRoQ29uZmlnKHRoaXMucGFyYW1zKTtcbiAgICB0aGlzLnNldENvbmZpZyhcbiAgICAgIHRoaXMucGFyYW1zLmFjY2VsZXJvbWV0ZXJfcmFuZ2UgfHwgMixcbiAgICAgIHRoaXMucGFyYW1zLmd5cm9zY29wZV9yYW5nZSB8fCAyNTBcbiAgICApO1xuICB9XG5cbiAgc2V0Q29uZmlnKGFjY2VsZXJvbWV0ZXJfcmFuZ2UsIGd5cm9zY29wZV9yYW5nZSkge1xuICAgIC8vYWNjZWwgcmFuZ2Ugc2V0ICgweDAwOjJnLCAweDA4OjRnLCAweDEwOjhnLCAweDE4OjE2ZylcbiAgICBzd2l0Y2ggKGFjY2VsZXJvbWV0ZXJfcmFuZ2UpIHtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgdGhpcy5pMmMud3JpdGUodGhpcy5fYWRkcmVzcywgWzB4MWMsIDB4MDBdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHRoaXMuaTJjLndyaXRlKHRoaXMuX2FkZHJlc3MsIFsweDFjLCAweDA4XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA4OlxuICAgICAgICB0aGlzLmkyYy53cml0ZSh0aGlzLl9hZGRyZXNzLCBbMHgxYywgMHgxMF0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTY6XG4gICAgICAgIHRoaXMuaTJjLndyaXRlKHRoaXMuX2FkZHJlc3MsIFsweDFjLCAweDE4XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhY2NlbF9yYW5nZSB2YXJpYWJsZSAyLDQsOCwxNiBzZXR0aW5nJyk7XG4gICAgfVxuICAgIC8vZ3lybyByYW5nZSAmIExQRiBzZXQgKDB4MDA6MjUwLCAweDA4OjUwMCwgMHgxMDoxMDAwLCAweDE4OjIwMDBbZGVnL3NdKVxuICAgIHN3aXRjaCAoZ3lyb3Njb3BlX3JhbmdlKSB7XG4gICAgICBjYXNlIDI1MDpcbiAgICAgICAgdGhpcy5pMmMud3JpdGUodGhpcy5fYWRkcmVzcywgWzB4MWIsIDB4MDBdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUwMDpcbiAgICAgICAgdGhpcy5pMmMud3JpdGUodGhpcy5fYWRkcmVzcywgWzB4MWIsIDB4MDhdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDEwMDA6XG4gICAgICAgIHRoaXMuaTJjLndyaXRlKHRoaXMuX2FkZHJlc3MsIFsweDFiLCAweDEwXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyMDAwOlxuICAgICAgICB0aGlzLmkyYy53cml0ZSh0aGlzLl9hZGRyZXNzLCBbMHgxYiwgMHgxOF0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYWNjZWxfcmFuZ2UgdmFyaWFibGUgMjUwLDUwMCwxMDAwLDIwMDAgc2V0dGluZycpO1xuICAgIH1cbiAgICB0aGlzLl9hY2NlbF9yYW5nZSA9IGFjY2VsZXJvbWV0ZXJfcmFuZ2U7XG4gICAgdGhpcy5fZ3lyb19yYW5nZSA9IGd5cm9zY29wZV9yYW5nZTtcbiAgfVxuXG4gIGFzeW5jIGdldFdhaXQoKSB7XG4gICAgdGhpcy5pMmMud3JpdGUodGhpcy5fYWRkcmVzcywgWzB4M2JdKTsgLy9yZXF1ZXN0IE1QVTYwNTAgZGF0YVxuICAgIGxldCByYXdfZGF0YV9NUFU2MDUwID0gYXdhaXQgdGhpcy5pMmMucmVhZFdhaXQodGhpcy5fYWRkcmVzcywgMTQpOyAvL3JlYWQgMTRieXRlXG4gICAgbGV0IGFjX3NjYWxlID0gdGhpcy5fYWNjZWxfcmFuZ2UgLyAzMjc2ODtcbiAgICBsZXQgZ3lfc2NhbGUgPSB0aGlzLl9neXJvX3JhbmdlIC8gMzI3Njg7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2VsZXJvbWV0ZXI6IHtcbiAgICAgICAgeDogdGhpcy5jaGFyMnNob3J0KHJhd19kYXRhX01QVTYwNTBbMF0sIHJhd19kYXRhX01QVTYwNTBbMV0pICogYWNfc2NhbGUsXG4gICAgICAgIHk6IHRoaXMuY2hhcjJzaG9ydChyYXdfZGF0YV9NUFU2MDUwWzJdLCByYXdfZGF0YV9NUFU2MDUwWzNdKSAqIGFjX3NjYWxlLFxuICAgICAgICB6OiB0aGlzLmNoYXIyc2hvcnQocmF3X2RhdGFfTVBVNjA1MFs0XSwgcmF3X2RhdGFfTVBVNjA1MFs1XSkgKiBhY19zY2FsZSxcbiAgICAgIH0sXG4gICAgICB0ZW1wOlxuICAgICAgICB0aGlzLmNoYXIyc2hvcnQocmF3X2RhdGFfTVBVNjA1MFs2XSwgcmF3X2RhdGFfTVBVNjA1MFs3XSkgLyAzMzMuODcgKyAyMSxcbiAgICAgIGd5cm9zY29wZToge1xuICAgICAgICB4OiB0aGlzLmNoYXIyc2hvcnQocmF3X2RhdGFfTVBVNjA1MFs4XSwgcmF3X2RhdGFfTVBVNjA1MFs5XSkgKiBneV9zY2FsZSxcbiAgICAgICAgeTpcbiAgICAgICAgICB0aGlzLmNoYXIyc2hvcnQocmF3X2RhdGFfTVBVNjA1MFsxMF0sIHJhd19kYXRhX01QVTYwNTBbMTFdKSAqXG4gICAgICAgICAgZ3lfc2NhbGUsXG4gICAgICAgIHo6XG4gICAgICAgICAgdGhpcy5jaGFyMnNob3J0KHJhd19kYXRhX01QVTYwNTBbMTJdLCByYXdfZGF0YV9NUFU2MDUwWzEzXSkgKlxuICAgICAgICAgIGd5X3NjYWxlLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY2hhcjJzaG9ydCh2YWx1ZUgsIHZhbHVlTCkge1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgIGR2LnNldFVpbnQ4KDAsIHZhbHVlSCk7XG4gICAgZHYuc2V0VWludDgoMSwgdmFsdWVMKTtcbiAgICByZXR1cm4gZHYuZ2V0SW50MTYoMCwgZmFsc2UpO1xuICB9XG59XG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBNUFU2MDUwO1xufVxuIl19
