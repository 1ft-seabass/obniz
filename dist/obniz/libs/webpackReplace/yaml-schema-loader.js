"use strict";
let yaml = require('js-yaml');
module.exports = function (source) {
    this.cacheable && this.cacheable();
    try {
        let src = yaml.safeLoad(source);
        let excludeKeys = ['example', 'description'];
        let res = filter(src, excludeKeys);
        // console.log("src",src);
        // console.log("res",res);
        return JSON.stringify(res, undefined, '\t');
    }
    catch (err) {
        this.emitError(err);
        return null;
    }
};
function filter(target, excludeKeys) {
    if (typeof target !== 'object') {
        return target;
    }
    if (target === null) {
        return target;
    }
    if (Array.isArray(target)) {
        let newArr = [];
        for (let key in target) {
            if (!excludeKeys.includes(key)) {
                newArr[key] = filter(target[key], excludeKeys);
            }
        }
        return target;
    }
    let newObj = {};
    for (let key in target) {
        if (!excludeKeys.includes(key)) {
            newObj[key] = filter(target[key], excludeKeys);
        }
    }
    return newObj;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYm5pei9saWJzL3dlYnBhY2tSZXBsYWNlL3lhbWwtc2NoZW1hLWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRTlCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBUyxNQUFNO0lBQzlCLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25DLElBQUk7UUFDRixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hDLElBQUksV0FBVyxHQUFHLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBRTdDLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDbkMsMEJBQTBCO1FBQzFCLDBCQUEwQjtRQUMxQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM3QztJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQixPQUFPLElBQUksQ0FBQztLQUNiO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsU0FBUyxNQUFNLENBQUMsTUFBTSxFQUFFLFdBQVc7SUFDakMsSUFBSSxPQUFPLE1BQU0sS0FBSyxRQUFRLEVBQUU7UUFDOUIsT0FBTyxNQUFNLENBQUM7S0FDZjtJQUNELElBQUksTUFBTSxLQUFLLElBQUksRUFBRTtRQUNuQixPQUFPLE1BQU0sQ0FBQztLQUNmO0lBQ0QsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3pCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixLQUFLLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRTtZQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUM7YUFDaEQ7U0FDRjtRQUNELE9BQU8sTUFBTSxDQUFDO0tBQ2Y7SUFDRCxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFDaEIsS0FBSyxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUU7UUFDdEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDaEQ7S0FDRjtJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMiLCJmaWxlIjoib2JuaXovbGlicy93ZWJwYWNrUmVwbGFjZS95YW1sLXNjaGVtYS1sb2FkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgeWFtbCA9IHJlcXVpcmUoJ2pzLXlhbWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgdGhpcy5jYWNoZWFibGUgJiYgdGhpcy5jYWNoZWFibGUoKTtcbiAgdHJ5IHtcbiAgICBsZXQgc3JjID0geWFtbC5zYWZlTG9hZChzb3VyY2UpO1xuICAgIGxldCBleGNsdWRlS2V5cyA9IFsnZXhhbXBsZScsICdkZXNjcmlwdGlvbiddO1xuXG4gICAgbGV0IHJlcyA9IGZpbHRlcihzcmMsIGV4Y2x1ZGVLZXlzKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcInNyY1wiLHNyYyk7XG4gICAgLy8gY29uc29sZS5sb2coXCJyZXNcIixyZXMpO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShyZXMsIHVuZGVmaW5lZCwgJ1xcdCcpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aGlzLmVtaXRFcnJvcihlcnIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIodGFyZ2V0LCBleGNsdWRlS2V5cykge1xuICBpZiAodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGlmICh0YXJnZXQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICBsZXQgbmV3QXJyID0gW107XG4gICAgZm9yIChsZXQga2V5IGluIHRhcmdldCkge1xuICAgICAgaWYgKCFleGNsdWRlS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIG5ld0FycltrZXldID0gZmlsdGVyKHRhcmdldFtrZXldLCBleGNsdWRlS2V5cyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgbGV0IG5ld09iaiA9IHt9O1xuICBmb3IgKGxldCBrZXkgaW4gdGFyZ2V0KSB7XG4gICAgaWYgKCFleGNsdWRlS2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICBuZXdPYmpba2V5XSA9IGZpbHRlcih0YXJnZXRba2V5XSwgZXhjbHVkZUtleXMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3T2JqO1xufVxuIl19
