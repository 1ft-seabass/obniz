"use strict";
const Builder = require('./bleAdvertisementBuilder');
class BleAdvertisement {
    constructor(Obniz) {
        this.Obniz = Obniz;
        this.adv_data = [];
        this.scan_resp = [];
    }
    start() {
        let obj = {};
        obj.ble = {};
        obj.ble.advertisement = {
            adv_data: this.adv_data,
        };
        if (this.scan_resp.length > 0) {
            obj.ble.advertisement.scan_resp = this.scan_resp;
        }
        this.Obniz.send(obj);
    }
    end() {
        let obj = {};
        obj.ble = {};
        obj.ble.advertisement = null;
        this.Obniz.send(obj);
    }
    setAdvDataRaw(adv_data) {
        this.adv_data = adv_data;
    }
    setAdvData(json) {
        let builder = this.advDataBulider(json);
        this.setAdvDataRaw(builder.build());
    }
    advDataBulider(jsonVal) {
        return new Builder(this.Obniz, jsonVal);
    }
    scanRespDataBuilder(json) {
        return new Builder(this.Obniz, json);
    }
    setScanRespDataRaw(scan_resp) {
        this.scan_resp = scan_resp;
    }
    setScanRespData(json) {
        this.setScanRespDataRaw(this.scanRespDataBuilder(json).build());
    }
}
module.exports = BleAdvertisement;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYm5pei9saWJzL2VtYmVkcy9ibGUvYmxlQWR2ZXJ0aXNlbWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFFckQsTUFBTSxnQkFBZ0I7SUFDcEIsWUFBWSxLQUFLO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELEtBQUs7UUFDSCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDYixHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNiLEdBQUcsQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHO1lBQ3RCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtTQUN4QixDQUFDO1FBRUYsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDN0IsR0FBRyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7U0FDbEQ7UUFFRCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBRUQsR0FBRztRQUNELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNiLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ2IsR0FBRyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxhQUFhLENBQUMsUUFBUTtRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRUQsVUFBVSxDQUFDLElBQUk7UUFDYixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVELGNBQWMsQ0FBQyxPQUFPO1FBQ3BCLE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsbUJBQW1CLENBQUMsSUFBSTtRQUN0QixPQUFPLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVELGtCQUFrQixDQUFDLFNBQVM7UUFDMUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVELGVBQWUsQ0FBQyxJQUFJO1FBQ2xCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNsRSxDQUFDO0NBQ0Y7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDIiwiZmlsZSI6Im9ibml6L2xpYnMvZW1iZWRzL2JsZS9ibGVBZHZlcnRpc2VtZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQnVpbGRlciA9IHJlcXVpcmUoJy4vYmxlQWR2ZXJ0aXNlbWVudEJ1aWxkZXInKTtcblxuY2xhc3MgQmxlQWR2ZXJ0aXNlbWVudCB7XG4gIGNvbnN0cnVjdG9yKE9ibml6KSB7XG4gICAgdGhpcy5PYm5peiA9IE9ibml6O1xuICAgIHRoaXMuYWR2X2RhdGEgPSBbXTtcbiAgICB0aGlzLnNjYW5fcmVzcCA9IFtdO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgbGV0IG9iaiA9IHt9O1xuICAgIG9iai5ibGUgPSB7fTtcbiAgICBvYmouYmxlLmFkdmVydGlzZW1lbnQgPSB7XG4gICAgICBhZHZfZGF0YTogdGhpcy5hZHZfZGF0YSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuc2Nhbl9yZXNwLmxlbmd0aCA+IDApIHtcbiAgICAgIG9iai5ibGUuYWR2ZXJ0aXNlbWVudC5zY2FuX3Jlc3AgPSB0aGlzLnNjYW5fcmVzcDtcbiAgICB9XG5cbiAgICB0aGlzLk9ibml6LnNlbmQob2JqKTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICBsZXQgb2JqID0ge307XG4gICAgb2JqLmJsZSA9IHt9O1xuICAgIG9iai5ibGUuYWR2ZXJ0aXNlbWVudCA9IG51bGw7XG4gICAgdGhpcy5PYm5pei5zZW5kKG9iaik7XG4gIH1cblxuICBzZXRBZHZEYXRhUmF3KGFkdl9kYXRhKSB7XG4gICAgdGhpcy5hZHZfZGF0YSA9IGFkdl9kYXRhO1xuICB9XG5cbiAgc2V0QWR2RGF0YShqc29uKSB7XG4gICAgbGV0IGJ1aWxkZXIgPSB0aGlzLmFkdkRhdGFCdWxpZGVyKGpzb24pO1xuICAgIHRoaXMuc2V0QWR2RGF0YVJhdyhidWlsZGVyLmJ1aWxkKCkpO1xuICB9XG5cbiAgYWR2RGF0YUJ1bGlkZXIoanNvblZhbCkge1xuICAgIHJldHVybiBuZXcgQnVpbGRlcih0aGlzLk9ibml6LCBqc29uVmFsKTtcbiAgfVxuXG4gIHNjYW5SZXNwRGF0YUJ1aWxkZXIoanNvbikge1xuICAgIHJldHVybiBuZXcgQnVpbGRlcih0aGlzLk9ibml6LCBqc29uKTtcbiAgfVxuXG4gIHNldFNjYW5SZXNwRGF0YVJhdyhzY2FuX3Jlc3ApIHtcbiAgICB0aGlzLnNjYW5fcmVzcCA9IHNjYW5fcmVzcDtcbiAgfVxuXG4gIHNldFNjYW5SZXNwRGF0YShqc29uKSB7XG4gICAgdGhpcy5zZXRTY2FuUmVzcERhdGFSYXcodGhpcy5zY2FuUmVzcERhdGFCdWlsZGVyKGpzb24pLmJ1aWxkKCkpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmxlQWR2ZXJ0aXNlbWVudDtcbiJdfQ==
