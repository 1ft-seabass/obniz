"use strict";
let events = require('events');
let Smp = require('./smp');
class AclStream extends events.EventEmitter {
    constructor(hci, handle, localAddressType, localAddress, remoteAddressType, remoteAddress) {
        super();
        this._hci = hci;
        this._handle = handle;
        this.encypted = false;
        this._smp = new Smp(this, localAddressType, localAddress, remoteAddressType, remoteAddress, this._hci);
    }
    rite(cid, data) {
        this._hci.queueAclDataPkt(this._handle, cid, data);
    }
    ush(cid, data) {
        if (data) {
            this.emit('data', cid, data);
        }
        else {
            this.emit('end');
        }
    }
    ushEncrypt(encrypt) {
        this.encrypted = encrypt ? true : false;
        this.emit('encryptChange', this.encrypted);
    }
    ushLtkNegReply() {
        this.emit('ltkNegReply');
    }
}
module.exports = AclStream;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYm5pei9saWJzL2VtYmVkcy9ibGVIY2kvcHJvdG9jb2wvcGVyaXBoZXJhbC9hY2wtc3RyZWFtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFL0IsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRTNCLE1BQU0sU0FBVSxTQUFRLE1BQU0sQ0FBQyxZQUFZO0lBQ3pDLFlBQ0UsR0FBRyxFQUNILE1BQU0sRUFDTixnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLGlCQUFpQixFQUNqQixhQUFhO1FBRWIsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUNoQixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUV0QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUNqQixJQUFJLEVBQ0osZ0JBQWdCLEVBQ2hCLFlBQVksRUFDWixpQkFBaUIsRUFDakIsYUFBYSxFQUNiLElBQUksQ0FBQyxJQUFJLENBQ1YsQ0FBQztJQUNKLENBQUM7SUFFRCxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUk7UUFDWixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJO1FBQ1gsSUFBSSxJQUFJLEVBQUU7WUFDUixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDOUI7YUFBTTtZQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDbEI7SUFDSCxDQUFDO0lBRUQsVUFBVSxDQUFDLE9BQU87UUFDaEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBRXhDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQsY0FBYztRQUNaLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDM0IsQ0FBQztDQUNGO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMiLCJmaWxlIjoib2JuaXovbGlicy9lbWJlZHMvYmxlSGNpL3Byb3RvY29sL3BlcmlwaGVyYWwvYWNsLXN0cmVhbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKTtcblxubGV0IFNtcCA9IHJlcXVpcmUoJy4vc21wJyk7XG5cbmNsYXNzIEFjbFN0cmVhbSBleHRlbmRzIGV2ZW50cy5FdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBoY2ksXG4gICAgaGFuZGxlLFxuICAgIGxvY2FsQWRkcmVzc1R5cGUsXG4gICAgbG9jYWxBZGRyZXNzLFxuICAgIHJlbW90ZUFkZHJlc3NUeXBlLFxuICAgIHJlbW90ZUFkZHJlc3NcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9oY2kgPSBoY2k7XG4gICAgdGhpcy5faGFuZGxlID0gaGFuZGxlO1xuICAgIHRoaXMuZW5jeXB0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX3NtcCA9IG5ldyBTbXAoXG4gICAgICB0aGlzLFxuICAgICAgbG9jYWxBZGRyZXNzVHlwZSxcbiAgICAgIGxvY2FsQWRkcmVzcyxcbiAgICAgIHJlbW90ZUFkZHJlc3NUeXBlLFxuICAgICAgcmVtb3RlQWRkcmVzcyxcbiAgICAgIHRoaXMuX2hjaVxuICAgICk7XG4gIH1cblxuICByaXRlKGNpZCwgZGF0YSkge1xuICAgIHRoaXMuX2hjaS5xdWV1ZUFjbERhdGFQa3QodGhpcy5faGFuZGxlLCBjaWQsIGRhdGEpO1xuICB9XG5cbiAgdXNoKGNpZCwgZGF0YSkge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICB0aGlzLmVtaXQoJ2RhdGEnLCBjaWQsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ2VuZCcpO1xuICAgIH1cbiAgfVxuXG4gIHVzaEVuY3J5cHQoZW5jcnlwdCkge1xuICAgIHRoaXMuZW5jcnlwdGVkID0gZW5jcnlwdCA/IHRydWUgOiBmYWxzZTtcblxuICAgIHRoaXMuZW1pdCgnZW5jcnlwdENoYW5nZScsIHRoaXMuZW5jcnlwdGVkKTtcbiAgfVxuXG4gIHVzaEx0a05lZ1JlcGx5KCkge1xuICAgIHRoaXMuZW1pdCgnbHRrTmVnUmVwbHknKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFjbFN0cmVhbTtcbiJdfQ==
