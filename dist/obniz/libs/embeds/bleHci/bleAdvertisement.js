"use strict";
const Builder = require('./bleAdvertisementBuilder');
class BleAdvertisement {
    constructor(obnizBle) {
        this.obnizBle = obnizBle;
        this.adv_data = [];
        this.scan_resp = [];
    }
    start() {
        this.obnizBle.warningIfNotInitialize();
        this.obnizBle.peripheralBindings.startAdvertisingWithEIRData(Buffer.from(this.adv_data), Buffer.from(this.scan_resp));
    }
    end() {
        this.obnizBle.peripheralBindings.stopAdvertising();
    }
    setAdvDataRaw(adv_data) {
        this.adv_data = adv_data;
    }
    setAdvData(json) {
        let builder = this.advDataBulider(json);
        this.setAdvDataRaw(builder.build());
    }
    advDataBulider(jsonVal) {
        return new Builder(this.Obniz, jsonVal);
    }
    scanRespDataBuilder(json) {
        return new Builder(this.Obniz, json);
    }
    setScanRespDataRaw(scan_resp) {
        this.scan_resp = scan_resp;
    }
    setScanRespData(json) {
        this.setScanRespDataRaw(this.scanRespDataBuilder(json).build());
    }
}
module.exports = BleAdvertisement;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9vYm5pei9saWJzL2VtYmVkcy9ibGVIY2kvYmxlQWR2ZXJ0aXNlbWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFFckQsTUFBTSxnQkFBZ0I7SUFDcEIsWUFBWSxRQUFRO1FBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsMkJBQTJCLENBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUMxQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FDNUIsQ0FBQztJQUNKLENBQUM7SUFFRCxHQUFHO1FBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUNyRCxDQUFDO0lBRUQsYUFBYSxDQUFDLFFBQVE7UUFDcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFJO1FBQ2IsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxjQUFjLENBQUMsT0FBTztRQUNwQixPQUFPLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVELG1CQUFtQixDQUFDLElBQUk7UUFDdEIsT0FBTyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxTQUFTO1FBQzFCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRCxlQUFlLENBQUMsSUFBSTtRQUNsQixJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDbEUsQ0FBQztDQUNGO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyIsImZpbGUiOiJvYm5pei9saWJzL2VtYmVkcy9ibGVIY2kvYmxlQWR2ZXJ0aXNlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJ1aWxkZXIgPSByZXF1aXJlKCcuL2JsZUFkdmVydGlzZW1lbnRCdWlsZGVyJyk7XG5cbmNsYXNzIEJsZUFkdmVydGlzZW1lbnQge1xuICBjb25zdHJ1Y3RvcihvYm5pekJsZSkge1xuICAgIHRoaXMub2JuaXpCbGUgPSBvYm5pekJsZTtcbiAgICB0aGlzLmFkdl9kYXRhID0gW107XG4gICAgdGhpcy5zY2FuX3Jlc3AgPSBbXTtcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMub2JuaXpCbGUud2FybmluZ0lmTm90SW5pdGlhbGl6ZSgpO1xuICAgIHRoaXMub2JuaXpCbGUucGVyaXBoZXJhbEJpbmRpbmdzLnN0YXJ0QWR2ZXJ0aXNpbmdXaXRoRUlSRGF0YShcbiAgICAgIEJ1ZmZlci5mcm9tKHRoaXMuYWR2X2RhdGEpLFxuICAgICAgQnVmZmVyLmZyb20odGhpcy5zY2FuX3Jlc3ApXG4gICAgKTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICB0aGlzLm9ibml6QmxlLnBlcmlwaGVyYWxCaW5kaW5ncy5zdG9wQWR2ZXJ0aXNpbmcoKTtcbiAgfVxuXG4gIHNldEFkdkRhdGFSYXcoYWR2X2RhdGEpIHtcbiAgICB0aGlzLmFkdl9kYXRhID0gYWR2X2RhdGE7XG4gIH1cblxuICBzZXRBZHZEYXRhKGpzb24pIHtcbiAgICBsZXQgYnVpbGRlciA9IHRoaXMuYWR2RGF0YUJ1bGlkZXIoanNvbik7XG4gICAgdGhpcy5zZXRBZHZEYXRhUmF3KGJ1aWxkZXIuYnVpbGQoKSk7XG4gIH1cblxuICBhZHZEYXRhQnVsaWRlcihqc29uVmFsKSB7XG4gICAgcmV0dXJuIG5ldyBCdWlsZGVyKHRoaXMuT2JuaXosIGpzb25WYWwpO1xuICB9XG5cbiAgc2NhblJlc3BEYXRhQnVpbGRlcihqc29uKSB7XG4gICAgcmV0dXJuIG5ldyBCdWlsZGVyKHRoaXMuT2JuaXosIGpzb24pO1xuICB9XG5cbiAgc2V0U2NhblJlc3BEYXRhUmF3KHNjYW5fcmVzcCkge1xuICAgIHRoaXMuc2Nhbl9yZXNwID0gc2Nhbl9yZXNwO1xuICB9XG5cbiAgc2V0U2NhblJlc3BEYXRhKGpzb24pIHtcbiAgICB0aGlzLnNldFNjYW5SZXNwRGF0YVJhdyh0aGlzLnNjYW5SZXNwRGF0YUJ1aWxkZXIoanNvbikuYnVpbGQoKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCbGVBZHZlcnRpc2VtZW50O1xuIl19
